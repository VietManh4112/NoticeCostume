(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{742:function(t,e,n){var content=n(750);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("0683e20c",content,!0,{sourceMap:!1})},749:function(t,e,n){"use strict";n(742)},750:function(t,e,n){var r=n(20)((function(i){return i[1]}));r.push([t.i,".edit{display:flex}.button-edit{display:flex;justify-content:center;visibility:hidden}.edit:hover .button-edit{visibility:visible}textarea{background-color:#fff;width:41vw}",""]),r.locals={},t.exports=r},753:function(t,e,n){"use strict";n.r(e);n(15),n(27),n(28),n(16);var r=n(30),o=n(2),c=(n(84),n(12),n(63),n(40),n(5),n(17),n(204));function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"TextEdit",props:{title:String,role:String,material:String,pattern:String,other:String,characteristic:String,male:String,female:String,apiUrl:String,id:Number,sexId:Number},computed:{displayValue:function(){return void 0!==this.role?this.role:void 0!==this.material?this.material:void 0!==this.pattern?this.pattern:void 0!==this.other?this.other:void 0!==this.characteristic?this.characteristic:void 0!==this.male?this.male:void 0!==this.female?this.female:void 0},isAdmin:function(){return"admin"===this.authority}},created:function(){this.editText=this.displayValue;var t=l({},this.infocostume),e=l({},this.description),r=n(426);localStorage.getItem("token")&&(this.authority=r.decode(localStorage.getItem("token")).role[0].authority),t.id=this.id,e.sexId=this.sexId,void 0!==this.material&&(t.material=this.material),void 0!==this.pattern&&(t.pattern=this.pattern),void 0!==this.other&&(t.other=this.other),void 0!==this.characteristic&&(t.characteristic=this.characteristic),void 0!==this.male?e.description=this.male:void 0!==this.female&&(e.description=this.female),this.updateCostume.push(t),this.updateDescription.push(e)},methods:{editInfo:function(){var t=this;this.isEditing||(this.isEditing=!0,this.$nextTick((function(){t.$refs.textInput.focus()})),this.editingItem={displayValue:this.displayValue})},cancel:function(){this.isEditing=!1},updateInfo:function(t){var e=this;void 0!==this[t]&&this.updateCostume.forEach((function(n){n[t]=e.editText}))},save:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.editingItem){e.next=2;break}return e.abrupt("return");case 2:if(t.isEditing=!1,e.prev=3,void 0===t.material&&void 0===t.pattern&&void 0===t.characteristic&&void 0===t.other){e.next=13;break}return t.updateInfo("material"),t.updateInfo("pattern"),t.updateInfo("characteristic"),t.updateInfo("other"),e.next=11,c.a.post(t.apiUrl,t.updateCostume[0]).then((function(t){window.location.reload()})).catch((function(t){console.error(t)}));case 11:e.next=16;break;case 13:void 0!==t.male&&t.updateDescription.forEach((function(e){e.description=t.editText})),void 0!==t.female&&t.updateDescription.forEach((function(e){e.description=t.editText})),c.a.post(t.apiUrl,t.updateDescription[0]).then((function(t){window.location.reload()})).catch((function(t){console.error(t)}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error saving data:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))()},handleKeyPress:function(t){"Escape"===t.key?this.cancel():"Enter"===t.key&&this.save()}},mounted:function(){document.addEventListener("keydown",this.handleKeyPress)},beforeDestroy:function(){document.removeEventListener("keydown",this.handleKeyPress)},data:function(){return{isEditing:!1,editText:this.text,editingItem:null,infocostume:{id:"",material:"",pattern:"",other:"",characteristic:""},description:{sexId:"",description:""},updateCostume:[],updateDescription:[],authority:null}}},f=(n(749),n(47)),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"edit"},[e("p",[e("b",[t._v(t._s(t.title))]),t._v(" "),t.isEditing?e("span",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editText,expression:"editText"}],ref:"textInput",domProps:{value:t.editText},on:{input:function(e){e.target.composing||(t.editText=e.target.value)}}}),t._v(" "),e("div",{staticStyle:{color:"red","font-size":"10px","z-index":"9999"}},[t._v("\n                nhấn esc để\n                "),e("button",{staticStyle:{color:"#06F"},on:{click:t.cancel}},[t._v("hủy")]),t._v("\n                • nhấn enter để\n                "),e("button",{staticStyle:{color:"#06F"},on:{click:t.save}},[t._v("lưu")])])]):e("span",[t._v(t._s(t.displayValue))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isAdmin,expression:"isAdmin"}],staticClass:"button-edit"},[e("button",{attrs:{title:"Chỉnh sửa"},on:{click:t.editInfo}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true",fill:"none"}},[e("path",{attrs:{fill:"currentColor",d:"m13.96 5.46 4.58 4.58a1 1 0 0 0 1.42 0l1.38-1.38a2 2 0 0 0 0-2.82l-3.18-3.18a2 2 0 0 0-2.82 0l-1.38 1.38a1 1 0 0 0 0 1.42ZM2.11 20.16l.73-4.22a3 3 0 0 1 .83-1.61l7.87-7.87a1 1 0 0 1 1.42 0l4.58 4.58a1 1 0 0 1 0 1.42l-7.87 7.87a3 3 0 0 1-1.6.83l-4.23.73a1.5 1.5 0 0 1-1.73-1.73Z"}})])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(79).default})}}]);